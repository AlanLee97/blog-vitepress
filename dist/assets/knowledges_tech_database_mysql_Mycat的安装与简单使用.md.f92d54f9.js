import{_ as r,o as i,c as C,a as e,h as s,e as a,w as n,b as o,i as t}from"./app.d2d47940.js";const _=JSON.parse('{"title":"Mycat的安装与简单使用","description":"","frontmatter":{},"headers":[{"level":2,"title":"一、准备资源","slug":"一、准备资源","link":"#一、准备资源","children":[]},{"level":2,"title":"二、安装MySQL","slug":"二、安装mysql","link":"#二、安装mysql","children":[]},{"level":2,"title":"三、连接数据库","slug":"三、连接数据库","link":"#三、连接数据库","children":[{"level":3,"title":"创建数据库","slug":"创建数据库","link":"#创建数据库","children":[]}]},{"level":2,"title":"四、安装Mycat","slug":"四、安装mycat","link":"#四、安装mycat","children":[]},{"level":2,"title":"五、测试与使用","slug":"五、测试与使用","link":"#五、测试与使用","children":[]},{"level":2,"title":"六、遇到的问题","slug":"六、遇到的问题","link":"#六、遇到的问题","children":[{"level":3,"title":"问题1","slug":"问题1","link":"#问题1","children":[]},{"level":3,"title":"问题2","slug":"问题2","link":"#问题2","children":[]}]}],"relativePath":"knowledges/tech/database/mysql/Mycat的安装与简单使用.md","lastUpdated":1678618356000}'),y={name:"knowledges/tech/database/mysql/Mycat的安装与简单使用.md"},d=o(`<h1 id="mycat的安装与简单使用" tabindex="-1">Mycat的安装与简单使用 <a class="header-anchor" href="#mycat的安装与简单使用" aria-hidden="true">#</a></h1><h2 id="一、准备资源" tabindex="-1">一、准备资源 <a class="header-anchor" href="#一、准备资源" aria-hidden="true">#</a></h2><table><thead><tr><th>IP</th><th>主机名</th><th>数据库名</th><th>安装软件</th></tr></thead><tbody><tr><td>192.168.1.20</td><td>master</td><td>master_db1</td><td>mycat,mysql</td></tr><tr><td>192.168.1.21</td><td>node1</td><td>node1_db2</td><td>mysql</td></tr><tr><td>192.168.1.22</td><td>node2</td><td>node2_db3</td><td>mysql</td></tr></tbody></table><h2 id="二、安装mysql" tabindex="-1">二、安装MySQL <a class="header-anchor" href="#二、安装mysql" aria-hidden="true">#</a></h2><p>安装mysql的方式有很多，这里我使用docker来安装mysql。</p><p>3台机子上都执行同样的操作</p><p><img src="https://gitee.com/AlanLee97/public-asset/raw/master/note_images/image-20200515152615593.png#alt=image-20200515152615593" alt=""></p><p><img src="https://gitee.com/AlanLee97/public-asset/raw/master/note_images/image-20200515155644635.png#alt=image-20200515155644635" alt=""></p><h2 id="三、连接数据库" tabindex="-1">三、连接数据库 <a class="header-anchor" href="#三、连接数据库" aria-hidden="true">#</a></h2><p><img src="https://gitee.com/AlanLee97/public-asset/raw/master/note_images/image-20200515155756557.png#alt=image-20200515155756557" alt=""></p><h3 id="创建数据库" tabindex="-1">创建数据库 <a class="header-anchor" href="#创建数据库" aria-hidden="true">#</a></h3><p>local-master创建db1</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">database</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">db1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>local-node-1创建db2</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">database</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">db2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>local-node-2创建db3</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">database</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">db3</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="四、安装mycat" tabindex="-1">四、安装Mycat <a class="header-anchor" href="#四、安装mycat" aria-hidden="true">#</a></h2><p>去官网下载mycat，链接<a href="http://www.mycat.org.cn/" target="_blank" rel="noreferrer">http://www.mycat.org.cn/</a></p><ol><li>上传Mycat到服务器</li></ol><p><img src="https://gitee.com/AlanLee97/public-asset/raw/master/note_images/image-20200515160405920.png#alt=image-20200515160405920" alt=""></p><ol start="2"><li>解压</li></ol><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">tar</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-zxvf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Mycat-server-</span><span style="color:#F78C6C;">1.4</span><span style="color:#C3E88D;">-release-</span><span style="color:#F78C6C;">20151019230038</span><span style="color:#C3E88D;">-linux.tar.gz</span></span>
<span class="line"></span></code></pre></div><p><img src="https://gitee.com/AlanLee97/public-asset/raw/master/note_images/image-20200515160529560.png#alt=image-20200515160529560" alt=""></p><ol start="3"><li>创建组</li></ol><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">groupadd mycat</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><ol start="4"><li>创建一个新的用户，并加入group</li></ol><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">useradd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-g</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mycat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mycat</span></span>
<span class="line"></span></code></pre></div><ol start="5"><li>给新用户设置密码</li></ol><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">passwd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mycat</span></span>
<span class="line"></span></code></pre></div><p><img src="https://gitee.com/AlanLee97/public-asset/raw/master/note_images/image-20200515161040956.png#alt=image-20200515161040956" alt=""></p><ol start="6"><li>进入conf</li></ol><p>修改server.xml</p><p><img src="https://gitee.com/AlanLee97/public-asset/raw/master/note_images/image-20200515161416760.png#alt=image-20200515161416760" alt=""></p><blockquote><p>完整的server.xml</p></blockquote><blockquote><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"></span></code></pre></div></blockquote><p>&lt;？xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</p>`,37),D=e("a",{href:"http://org.opencloudb/",target:"_blank",rel:"noreferrer"},"http://org.opencloudb/",-1),A=o(`<div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">修改schema.xml</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">![](https://gitee.com/AlanLee97/public-asset/raw/master/note_images/image-20200515161739168.png#alt=image-20200515161739168)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">![](https://gitee.com/AlanLee97/public-asset/raw/master/note_images/image-20200516105219957.png#alt=image-20200516105219957)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">&gt; 完整的schema.xml</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">&gt; \`\`\`xml</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;？xml version=&quot;1.0&quot;?&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;!DOCTYPE mycat:schema SYSTEM &quot;schema.dtd&quot;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;mycat:schema xmlns:mycat=&quot;http://org.opencloudb/&quot;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">	&lt;schema name=&quot;zdxh&quot; checkSQLschema=&quot;false&quot; sqlMaxLimit=&quot;100&quot;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">		&lt;table name=&quot;employee&quot; primaryKey=&quot;ID&quot; dataNode=&quot;dn1,dn2,dn3&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">			rule=&quot;sharding-by-intfile&quot; /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">	&lt;/schema&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">	&lt;dataNode name=&quot;dn1&quot; dataHost=&quot;local-master&quot; database=&quot;master_db1&quot; /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">	&lt;dataNode name=&quot;dn2&quot; dataHost=&quot;local-node-1&quot; database=&quot;node1_db2&quot; /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">	&lt;dataNode name=&quot;dn3&quot; dataHost=&quot;local-node-2&quot; database=&quot;node2_db3&quot; /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">	&lt;dataHost name=&quot;local-master&quot; maxCon=&quot;1000&quot; minCon=&quot;10&quot; balance=&quot;0&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">		writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;native&quot; switchType=&quot;1&quot;  slaveThreshold=&quot;100&quot;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">		&lt;heartbeat&gt;select user()&lt;/heartbeat&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">		&lt;writeHost host=&quot;hostM1&quot; url=&quot;192.168.1.20:3306&quot; user=&quot;root&quot; password=&quot;123456&quot;&gt;&lt;/writeHost&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">	&lt;/dataHost&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span></span>
<span class="line"><span style="color:#A6ACCD;">	&lt;dataHost name=&quot;local-node-1&quot; maxCon=&quot;1000&quot; minCon=&quot;10&quot; balance=&quot;0&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">		writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;native&quot; switchType=&quot;1&quot;  slaveThreshold=&quot;100&quot;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">		&lt;heartbeat&gt;select user()&lt;/heartbeat&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">		&lt;writeHost host=&quot;hostM2&quot; url=&quot;192.168.1.21:3306&quot; user=&quot;root&quot; password=&quot;123456&quot;&gt;&lt;/writeHost&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">	&lt;/dataHost&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span></span>
<span class="line"><span style="color:#A6ACCD;">	&lt;dataHost name=&quot;local-node-2&quot; maxCon=&quot;1000&quot; minCon=&quot;10&quot; balance=&quot;0&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">		writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;native&quot; switchType=&quot;1&quot;  slaveThreshold=&quot;100&quot;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">		&lt;heartbeat&gt;select user()&lt;/heartbeat&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">		&lt;writeHost host=&quot;hostM3&quot; url=&quot;192.168.1.22:3306&quot; user=&quot;root&quot; password=&quot;123456&quot;&gt;&lt;/writeHost&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">	&lt;/dataHost&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;/mycat:schema&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>修改partition-hash-int.txt</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">10000=0</span></span>
<span class="line"><span style="color:#A6ACCD;">10010=1</span></span>
<span class="line"><span style="color:#A6ACCD;">10020=2</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><ol start="7"><li>启动mycat</li></ol><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bin</span></span>
<span class="line"><span style="color:#82AAFF;">.</span><span style="color:#FFCB6B;">/mycat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span></span>
<span class="line"></span></code></pre></div><p>启动成功</p><p><img src="https://gitee.com/AlanLee97/public-asset/raw/master/note_images/image-20200515170634394.png#alt=image-20200515170634394" alt=""></p><h2 id="五、测试与使用" tabindex="-1">五、测试与使用 <a class="header-anchor" href="#五、测试与使用" aria-hidden="true">#</a></h2><ol><li>navicat连接mycat</li></ol><p><img src="https://gitee.com/AlanLee97/public-asset/raw/master/note_images/image-20200515170923072.png#alt=image-20200515170923072" alt=""></p><blockquote><p>这里显示连接成功，但是打不开数据库，后面会提到解决方案，先往后面的步骤继续做</p></blockquote><ol start="2"><li>创建表</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">use</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">zdxh</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#FFCB6B;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">employee</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">id</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">null</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">primary</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">key,name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">varchar</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">100</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">,sharding_id</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">null</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span></code></pre></div><p><img src="https://gitee.com/AlanLee97/public-asset/raw/master/note_images/image-20200515175655400.png#alt=image-20200515175655400" alt=""></p><ol start="3"><li>往mycat中插入数据</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">INSERT</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">INTO</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">EMPLOYEE</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">ID,NAME,SHARDING_ID</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">VALUES</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">I am db1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">10000</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#FFCB6B;">INSERT</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">INTO</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">EMPLOYEE</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">ID,NAME,SHARDING_ID</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">VALUES</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">I am db2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">10010</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#FFCB6B;">INSERT</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">INTO</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">EMPLOYEE</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">ID,NAME,SHARDING_ID</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">VALUES</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">I am db3</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">10020</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#FFCB6B;">INSERT</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">INTO</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">EMPLOYEE</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">ID,NAME,SHARDING_ID</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">VALUES</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">I am db1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">10000</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#FFCB6B;">INSERT</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">INTO</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">EMPLOYEE</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">ID,NAME,SHARDING_ID</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">VALUES</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">I am db2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">10010</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#FFCB6B;">INSERT</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">INTO</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">EMPLOYEE</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">ID,NAME,SHARDING_ID</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">VALUES</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">6</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">I am db3</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">10020</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span></code></pre></div><p>效果</p><p><img src="https://gitee.com/AlanLee97/public-asset/raw/master/note_images/image-20200515203852730.png#alt=image-20200515203852730" alt=""></p><p>在mycat中插入的6条数据被分散地插入到3个数据库中</p><p><img src="https://gitee.com/AlanLee97/public-asset/raw/master/note_images/image-20200515204045044.png#alt=image-20200515204045044" alt=""></p><p><img src="https://gitee.com/AlanLee97/public-asset/raw/master/note_images/image-20200515204109907.png#alt=image-20200515204109907" alt=""></p><p><img src="https://gitee.com/AlanLee97/public-asset/raw/master/note_images/image-20200515204124375.png#alt=image-20200515204124375" alt=""></p><h2 id="六、遇到的问题" tabindex="-1">六、遇到的问题 <a class="header-anchor" href="#六、遇到的问题" aria-hidden="true">#</a></h2><h3 id="问题1" tabindex="-1">问题1 <a class="header-anchor" href="#问题1" aria-hidden="true">#</a></h3><p>org.opencloudb.config.util.ConfigException: schema zdxh refered by user root is not exist!</p><p><img src="https://gitee.com/AlanLee97/public-asset/raw/master/note_images/image-20200515163739559.png#alt=image-20200515163739559" alt=""></p><h4 id="原因" tabindex="-1">原因 <a class="header-anchor" href="#原因" aria-hidden="true">#</a></h4><p>schema.xml文件下的schema标签的name属性值忘了改成zdxh</p><h4 id="解决" tabindex="-1">解决 <a class="header-anchor" href="#解决" aria-hidden="true">#</a></h4><p>schema.xml文件下的schema标签的name属性值改成zdxh</p><h3 id="问题2" tabindex="-1">问题2 <a class="header-anchor" href="#问题2" aria-hidden="true">#</a></h3><p>navicat连接mycat，显示连接成功，却打不开mycat，提示database not selected的问题</p><p><img src="https://gitee.com/AlanLee97/public-asset/raw/master/note_images/image-20200515171718851.png#alt=image-20200515171718851" alt=""></p><h4 id="原因-1" tabindex="-1">原因 <a class="header-anchor" href="#原因-1" aria-hidden="true">#</a></h4><p>navicat版本的问题</p><h4 id="解决-1" tabindex="-1">解决 <a class="header-anchor" href="#解决-1" aria-hidden="true">#</a></h4><p>方案1：</p><p>如果采用工具连接，1.4,1.3目前部分工具无法连接，会提示database not selected，建议采用高版本，navicat测试。1.5已经修复了部分工具连接。</p><p>方案2：使用mysql客户端连接</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">mysql</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-uroot</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p123456</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-P8066</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-h192.168.1.20</span></span>
<span class="line"></span></code></pre></div><p><img src="https://gitee.com/AlanLee97/public-asset/raw/master/note_images/image-20200515173743637.png#alt=image-20200515173743637" alt=""></p><p>方案3：使用sqlyog连接工具连接</p>`,42);function m(h,u,g,F,q,b){const l=t("property"),p=t("system"),c=t("user");return i(),C("div",null,[d,e("p",null,[s('<mycat:server xmlns:mycat="'),D,s('"> '),a(p,null,{default:n(()=>[a(l,{name:"defaultSqlParser"},{default:n(()=>[s("druidparser")]),_:1})]),_:1}),a(c,{name:"root"},{default:n(()=>[a(l,{name:"password"},{default:n(()=>[s("123456")]),_:1}),a(l,{name:"schemas"},{default:n(()=>[s("zdxh")]),_:1})]),_:1}),s(" </mycat:server>")]),A])}const v=r(y,[["render",m]]);export{_ as __pageData,v as default};
